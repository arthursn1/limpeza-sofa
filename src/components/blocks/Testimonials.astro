---
import type { z } from "astro/zod";
import { TestimonialsSchema } from "../../types/schema";

type Props = z.infer<typeof TestimonialsSchema>['props'];

const { eyebrow, title, description, items } = Astro.props;
---

<section id="depoimentos" class="py-24 bg-background">
  <div class="container mx-auto px-4">
    
    <div class="text-center max-w-2xl mx-auto mb-16">
      {eyebrow && (
        <span class="inline-block text-primary font-semibold text-sm uppercase tracking-wider mb-4">
          {eyebrow}
        </span>
      )}
      <h2 class="font-sans text-3xl md:text-4xl font-bold text-foreground mb-4">
        {title}
      </h2>
      {description && (
        <p class="text-muted-foreground text-lg">
          {description}
        </p>
      )}
    </div>

    <div class="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto">
      {items.map((item) => (
        <div class="bg-card rounded-2xl p-6 border border-border shadow-card relative">
          
          <div class="absolute top-6 right-6 text-primary/10 pointer-events-none">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/>
              <path d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"/>
            </svg>
          </div>
          
          <div class="flex items-center gap-4 mb-4 relative z-10">
            <div class="w-14 h-14 rounded-full overflow-hidden border-2 border-primary/20 flex-shrink-0">
              {item.avatar ? (
                <img src={item.avatar} alt={item.name} class="w-full h-full object-cover" />
              ) : (
                // Fallback se n√£o tiver foto: Iniciais com cores do tema
                <div class="w-full h-full flex items-center justify-center bg-primary/10 text-primary font-bold text-lg">
                  {item.name.charAt(0)}
                </div>
              )}
            </div>
            
            <div>
              <h4 class="font-semibold text-foreground">{item.name}</h4>
              <p class="text-sm text-muted-foreground">{item.location}</p>
            </div>
          </div>

          <div class="flex gap-1 mb-3 relative z-10">
            {[1, 2, 3, 4, 5].map(() => (
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary">
                 <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/>
              </svg>
            ))}
          </div>

          <p class="text-muted-foreground leading-relaxed relative z-10">
            "{item.text}"
          </p>

        </div>
      ))}
    </div>

  </div>
</section>